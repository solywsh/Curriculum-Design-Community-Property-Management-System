# 附件: 代码-王世浩

## main.cpp

```c++
#pragma once
#include <iostream>
#include <stdlib.h>
#include <iomanip>//设置cout时的空格setw()
#include "menu.h"
using namespace std;

int main(){
    int choice;
    char usr[100], pw[100];
    bool flag_menu = false;//当管理员登陆之后为true，才能进入管理界面
    bool flag_admin = true;//控制管理员菜单的循环

    //bool flag_menu = true;//跳过登陆直接进入菜单，调试用
    //bool flag_admin = false;

    bool flag = false;
    admin admin_object;
    doc doc_main;

    /*admin_object.admin_set();
    flag = doc_main.admin_write(admin_object);
    此处是用于第一次登陆,在数据文件里没有管理员信息的情况*/

    SYSTEMTIME sys_main;
    GetLocalTime(&sys_main);

    while (flag_admin)
    {
        
    system("cls");
cout << "================================================================================" << endl;
cout << "=                                小区物业管理系统                                =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                1.管理员登陆                                    =" << endl;
cout << "=                                2.修改密码                                     =" << endl;
cout << "=                                3.退出                                         =" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        
        cout << "=" << setw(30) << "时间: " << sys_main.wYear << "年" << sys_main.wMonth << "月" << sys_main.wDay << "日  "
            << sys_main.wHour << ":";
        if (sys_main.wMinute < 10) {
            cout << "0" << sys_main.wMinute;//小于10时加一
        }
        else
        {
            cout << sys_main.wMinute;
        }
        cout << "  星期";
        if (sys_main.wDayOfWeek == 1) { cout << "一"; }
        if (sys_main.wDayOfWeek == 2) { cout << "二"; }
        if (sys_main.wDayOfWeek == 3) { cout << "三"; }
        if (sys_main.wDayOfWeek == 4) { cout << "四"; }
        if (sys_main.wDayOfWeek == 5) { cout << "五"; }
        if (sys_main.wDayOfWeek == 6) { cout << "六"; }
        if (sys_main.wDayOfWeek == 7) { cout << "日"; }
        cout << setw(21) << "=" << endl;
        cout << "================================================================================" << endl;

        cout << "请选择对应功能: ";
        cin >> choice;
        while (choice == 0 || choice > 3) {
            system("pause");
            cout << "输入数字不正确，请重新输入1-3: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            while (true)
            {
                cout << "请输入管理员用户名: ";
                cin >> usr;
                cout << "请输入管理员密码: ";
                cin >> pw;
                if (strcmp(doc_main.admin_find(usr), pw) == 0) {
                    system("cls");
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                     欢迎!                                    =" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
                    system("pause");
                    flag_admin = false;
                    flag_menu = true;
                    break;//此break跳出while循环
                }
                else {
                    cout << "密码不正确，请重新输入!" << endl;
                    system("pause");
                }
            }
            break;//此break结束switch
        case 2:
            while (true){
                cout << "请输入管理员用户名: ";
                cin >> usr;
                cout << "请输入旧的管理员密码: ";
                cin >> pw;
                if (strcmp(doc_main.admin_find(usr), pw) == 0) {
                    cout << "请输入新的密码: " ;
                    cin >> pw;
                    admin_object.admin_set_password(pw);
                    admin_object.admin_set_username(usr);
                    if (doc_main.admin_rewrite(admin_object)) {
                        cout << "修改成功!新的密码: ";
                        cout << admin_object.admin_get_password()<< endl;
                    }
                    else cout << "修改失败!" << endl;
                    /*flag_admin = false;
                    flag_menu = true;*/
                    system("pause");
                    break;//此break跳出while循环
                }
                else {
                    cout << "用户名或密码不正确，请重新输入!" << endl;
                }
            }
            break;//此break结束switch
        default:
            return 0;
        }
    }
    while (flag_menu)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                            小区物业管理系统菜单                              =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                               1.业主管理                                     =" << endl;
cout << "=                               2.费用管理                                     =" << endl;
cout << "=                               3.维修管理                                     =" << endl;
cout << "=                               4.公告管理                                     =" << endl;
cout << "=                               5.退出                                         =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择对应功能: ";
        cin >> choice;
        while (choice == 0 || choice > 5){
            system("pause");
            cout << "输入数字不正确，请重新输入1-5: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");//清空之前界面
            owner_menu();
            //system("pause");//停顿
            break;
        case 2:
            system("cls");
            fee_menu();
            break;
        case 3:
            system("cls");
            repair_menu();
            break;
        case 4:
            system("cls");
            announcement_menu();
            break;
        default:
            return 0;
        }
    }

}


```

## meun.h

```c++
#pragma once
#include <iostream>
#include<stdio.h>
#include"doc.h"
using namespace std;

void owner_menu();//用于业主的菜单展示
void fee_menu();//费用菜单
void repair_menu();//维修菜单
void announcement_menu();//公告菜单

//业主 子菜单函数
void owner_meun_input();
void owner_meun_rewrite();
void owner_meun_delete();
void owner_meun_find_all();

//费用子菜单函数
void fee_meun_input();
void fee_meun_rewrite();
void fee_meun_delete();
void fee_meun_find_all();
void fee_meun_find_one();
void fee_meun_statistics();//统计

void repair_meun_input();
void repair_meun_find_all();
void repair_meun_delete();
void repair_meun_find_one();

void announcement_meun_input();
void announcement_meun_find_all();
void announcement_meun_delete();
```

## meun.cpp

```cpp
#pragma once
#include "menu.h"

void owner_menu(){
    int choice, flag = 1;
    
    while (flag)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                                  业主管理                                    =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                               1.业主信息录入                                   =" << endl;
cout << "=                               2.业主信息修改                                   =" << endl;
cout << "=                               3.业主信息删除                                   =" << endl;
cout << "=                               4.查看所有业主信息                                =" << endl;
cout << "=                               5.返回                                         =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择对应功能: ";
        cin >> choice;
        while (choice == 0 || choice > 5) {
            cout << "输入数字不正确，请重新输入1-5: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");
            owner_meun_input();
            break;
        case 2:
            system("cls");
            owner_meun_rewrite();
            break;
        case 3:
            system("cls");
            owner_meun_delete();
            break;
        case 4:
            system("cls");
            owner_meun_find_all();
            break;
        default:
            flag = 0;
            system("cls");
            break;
        }
    }
}
void fee_menu(){
    int choice, flag = 1;
    while (flag)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                                  费用管理                                    =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                               1.费用录入                                     =" << endl;
cout << "=                               2.费用信息修改                                 =" << endl;
cout << "=                               3.费用信息删除                                 =" << endl;
cout << "=                               4.查看所有信息                                 =" << endl;
cout << "=                               5.查找缴费情况                                 =" << endl;
cout << "=                               6.统计未缴费名单                               =" << endl;
cout << "=                               7.返回                                         =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择对应功能: ";
        cin >> choice;
        while (choice == 0 || choice > 7) {
            cout << "输入数字不正确，请重新输入1-7: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");
            fee_meun_input();
            break;
        case 2:
            system("cls");
            fee_meun_rewrite();
            break;
        case 3:
            system("cls");
            fee_meun_delete();
            break;
        case 4:
            system("cls");
            fee_meun_find_all();
            break;
        case 5:
            system("cls");
            fee_meun_find_one();
            break;
        case 6:
            system("cls");
            fee_meun_statistics();
            break;
        default:
            flag = 0;
            system("cls");
            break;
        }
    }

}
void repair_menu() {
    int choice, flag = 1;
    while (flag)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                                  维修管理                                    =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl; 
cout << "=                               1.维修登记                                     =" << endl;
cout << "=                               2.显示所有维修记录                             =" << endl;
cout << "=                               3.维修记录删除                                 =" << endl;
cout << "=                               4.维修记录查找                                 =" << endl;
cout << "=                               5.返回                                         =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择对应功能: ";
        cin >> choice;
        while (choice == 0 || choice > 5) {
            cout << "输入数字不正确，请重新输入1-5: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");
            repair_meun_input();
            break;
        case 2:
            system("cls");
            repair_meun_find_all();
            break;
        case 3:
            system("cls");
            repair_meun_delete();
            break;
        case 4:
            system("cls");
            repair_meun_find_one();
            break;
        default:
            flag = 0;
            system("cls");
            break;
        }
    }
}
void announcement_menu() {
    int choice, flag = 1;
    while (flag)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                                  公告管理                                     =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                               1.添加公告                                      =" << endl;
cout << "=                               2.查看所有公告                                   =" << endl;
cout << "=                               3.删除公告                                      =" << endl;
cout << "=                               4.返回                                          =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择对应功能: ";
        cin >> choice;
        while (choice == 0 || choice > 4) {
            cout << "输入数字不正确，请重新输入1-4: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");
            announcement_meun_input();
            break;
        case 2:
            system("cls");
            announcement_meun_find_all();
            break;
        case 3:
            system("cls");
            announcement_meun_delete();
            break;
        default:
            flag = 0;
            system("cls");
            break;
        }
    }

}

void owner_meun_input() {
    int i = 0, flag;
    bool flag_bool;
    owner owner_object;
    doc owner_doc;
    while (true){
        cout << "================================================================================" << endl;
        cout << "请输入第" <<i+1<<"位业主信息"<< endl;
        owner_object.owner_set();
        flag_bool = owner_doc.owner_write(owner_object);
        cout <<"是否继续？(1.继续 2.退出): ";
        cin >> flag;
        cout << "================================================================================" << endl;
        if (flag == 2) break;
        i++;
    }
}
void owner_meun_rewrite() {
    int choice, flag = 1;
    int id;
    bool flag_bool = false,flag_while = true;
    owner owner_object;
    doc owner_doc;

    while (flag_while)
    {
        cout << "================================================================================" << endl;
        cout << "请输入要修改业主的id(楼号+房号):";
        cin >> id;
        owner_object = owner_doc.owner_find_by_id(id);
        if (owner_object.owner_get_id() == 0)
        {
            cout << "没有查到对应业主信息！请重试！" << endl;
            cout << "================================================================================" << endl;
        }
        else
        {
            cout << "================================================================================" << endl;
            cout << "要修改的业主的信息为:" << endl;
            owner_object.owner_print();
            system("pause");
            cout << "================================================================================" << endl;
            flag_while = false;
        }
    }

    while (flag)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                                    信息修改                                  =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                                     1.姓名                                   =" << endl;
cout << "=                                     2.性别                                   =" << endl;
cout << "=                                     3.电话                                   =" << endl;
cout << "=                                     4.面积                                   =" << endl;
cout << "=                                     5.退出                                   =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择修改的信息: ";
        cin >> choice;
        while (choice == 0 || choice > 5) {
            system("pause");
            cout << "输入数字不正确，请重新输入1-5: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");//清空之前界面
            cout << "================================================================================" << endl;
            owner_object.owner_set_name();
            cout << "业主的信息更新为:" << endl;
            flag_bool = owner_doc.owner_rewrite(owner_object);
            owner_object.owner_print();
            system("pause");//停顿
            break;
        case 2:
            system("cls");
            cout << "================================================================================" << endl;
            owner_object.owner_set_sex();
            flag_bool = owner_doc.owner_rewrite(owner_object);
            cout << "业主的信息更新为:" << endl;
            owner_object.owner_print();
            system("pause");
            break;
        case 3:
            system("cls");
            cout << "================================================================================" << endl;
            owner_object.owner_set_phone_number();
            cout << "业主的信息更新为:" << endl;
            flag_bool = owner_doc.owner_rewrite(owner_object);
            owner_object.owner_print();
            system("pause");
            break;
        case 4:
            system("cls");
            cout << "================================================================================" << endl;
            owner_object.owner_set_area();
            cout << "业主的信息更新为:" << endl;
            flag_bool = owner_doc.owner_rewrite(owner_object);
            owner_object.owner_print();
            system("pause");
        default:
            flag = 0;
            break;
        }
    }
    
    if (flag = flag_bool)
    {
        cout << "已经成功保存至文件！" << endl;
        system("pause");
    }
}
void owner_meun_delete() {
    int id;
    char choice;
    bool flag_bool = false,flag_while = true;
    owner owner_object;
    doc owner_doc;
    while (flag_while)
    {
        system("cls");
        cout << "================================================================================" << endl;
        cout << "请输入要删除业主的id(楼号+房号):";
        cin >> id;
        owner_object = owner_doc.owner_find_by_id(id);
        if (owner_object.owner_get_id() == 0)
        {
            cout << "没有查到对应业主信息！请重试！" << endl;
            system("pause");
        }
        else
        {
            cout << "业主的信息为:" << endl;
            owner_object.owner_print();
            cout << "确认删除？(y/n): ";
            cin >> choice;
            if (choice == 'y'||choice == 'Y')
            {
                flag_bool = owner_doc.owner_delete(id);
            }
            flag_while = false;
        }
        
    }
    
    if (flag_bool)
    {
        cout << "删除成功！" << endl;
        system("pause");
    }
}
void owner_meun_find_all() {
    bool flag_bool;
    owner owner_obj;
    doc owner_doc;
    flag_bool = owner_doc.owner_read_all(owner_obj);
}

void fee_meun_input() {
    doc doc_object;
    owner owner_object;
    fee fee_object;
    fee fee_flag;
    int id_fee,flag_int;
    bool flag_bool = true;
    while (flag_bool) {
        cout << "================================================================================" << endl;
        cout << "请输入费用业主的id(楼号+房号): ";
        cin >> id_fee;
        owner_object = doc_object.owner_find_by_id(id_fee);
        if (id_fee == 0) break;

        if (owner_object.owner_get_id() == 0) {
            cout << "未找到相应用户!请重新输入!(输入0退出)" << endl;
            flag_bool = true;
        }
        else {
            cout << "找到了！\n用户信息为: " << endl;
            owner_object.owner_print();
            fee_object.fee_set(owner_object.owner_get_area(),id_fee);
            fee_flag = doc_object.fee_find_by_id_quarterly(id_fee, fee_object.fee_get_quarterly());//输入id和季度信息去查找
            if (fee_flag.fee_get_id()!= 0)
            {
                cout << "已经含有此季度信息!请重新输入!" << endl;
                system("pause");
            }
            else
            {
                doc_object.fee_write(fee_object);
                //这里可以加一个询问是否继续
                cout << "是否继续？(1.继续 2.退出): ";
                cin >> flag_int;
                cout << "================================================================================" << endl;
                if (flag_int == 2) flag_bool = false;;
                system("pause");
            }
            
        }
    }
}
void fee_meun_rewrite() {
    int choice, flag = 0, quarterly;
    int id;
    bool flag_bool = false, flag_while = true;
    owner owner_object;
    fee fee_object;
    doc fee_doc;

    while (flag_while)
    {
        cout << "================================================================================" << endl;
        cout << "请输入要修改业主的id(楼号+房号):";
        cin >> id;
        cout << "请输入要修改的季度: ";
        cin >> quarterly;
        if (id == 0) break;
        owner_object = fee_doc.owner_find_by_id(id);
        fee_object = fee_doc.fee_find_by_id_quarterly(id, quarterly);

        if (owner_object.owner_get_id()==0 || fee_object.fee_get_id()== 0)
        {
            cout << "没有查到对应业主信息！请重试！(id输入0退出)" << endl;
            system("pause");
        }
        else
        {
            cout << "业主的信息为:" << endl;
            owner_object.owner_print();
            fee_object.fee_print();
            system("pause");
            flag_while = false;
            flag = 1;
        }
        
    }

    while (flag)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                                  费用修改                                    =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                               1.物业费                                       =" << endl;
cout << "=                               2.电梯费                                       =" << endl;
cout << "=                               3.暖气费                                       =" << endl;
cout << "=                               4.水费                                         =" << endl;
cout << "=                               5.缴费情况                                     =" << endl;
cout << "=                               6.返回                                         =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择修改的信息: ";
        cin >> choice;
        while (choice == 0 || choice > 6) {
            cout << "输入数字不正确，请重新输入1-6: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");//清空之前界面
            fee_object.fee_set_property_costs();
            fee_object.fee_set_all();//更新收费总和
            flag_bool = fee_doc.fee_rewrite(fee_object);
            cout << "================================================================================" << endl;
            cout << "费用信息更新为:" << endl;
            
            fee_object.fee_print();
            system("pause");//停顿
            break;
        case 2:
            system("cls");
            fee_object.fee_set_elevator_fee();
            fee_object.fee_set_all();//更新收费总和
            flag_bool = fee_doc.fee_rewrite(fee_object);
            cout << "================================================================================" << endl;
            cout << "费用信息更新为:" << endl;
            fee_object.fee_print();
            system("pause");
            break;
        case 3:
            system("cls");
            fee_object.fee_set_heating_costs();
            fee_object.fee_set_all();//更新收费总和
            flag_bool = fee_doc.fee_rewrite(fee_object);
            cout << "================================================================================" << endl;
            cout << "费用信息更新为:" << endl;
            fee_object.fee_print();
            system("pause");
            break;
        case 4:
            system("cls");
            fee_object.fee_set_water_fee();
            fee_object.fee_set_all();//更新收费总和
            flag_bool = fee_doc.fee_rewrite(fee_object);
            cout << "================================================================================" << endl;
            cout << "费用信息更新为:" << endl;
            fee_object.fee_print();
            system("pause");
            break;
        case 5:
            system("cls");
            fee_object.fee_set_paid();
            fee_object.fee_set_all();//更新收费总和
            flag_bool = fee_doc.fee_rewrite(fee_object);
            cout << "================================================================================" << endl;
            cout << "费用信息更新为:" << endl;
            fee_object.fee_print();
            system("pause");
            break;
        default:
            flag = 0;
            break;
        }
    }

    
    if (flag_bool)
    {
        cout << "================================================================================" << endl;
        cout << "已经成功保存至文件！" << endl;
        system("pause");
    }

}
void fee_meun_delete() {
    char choice;
    int id, quarterly ,flag = 1;
    bool flag_bool = false, flag_while = true;
    owner owner_object;
    fee fee_object;
    doc fee_doc;
    while (flag_while)
    {
        cout << "================================================================================" << endl;
        cout << "请输入要删除业主的id(楼号+房号):";
        cin >> id;
        cout << "请输入要删除的季度: ";
        cin >> quarterly;
        owner_object = fee_doc.owner_find_by_id(id);
        fee_object = fee_doc.fee_find_by_id_quarterly(id, quarterly);
        if (id == 0)flag_while = false;
        if (fee_object.fee_get_id() == 0)
        {
            cout << "================================================================================" << endl;
            cout << "没有查到对应业主信息！请重试！(输入id = 0退出)" << endl;
        }
        else
        {
            cout << "================================================================================" << endl;
            cout << "业主的信息为:" << endl;
            owner_object.owner_print();
            fee_object.fee_print();
            cout << "确认删除？(y/n): ";
            //chioce = getche() 从键盘读一个字符并回显
            cin >> choice;
            if (choice == 'y' || choice == 'Y')
            {
                flag_while = false;
                flag_bool = fee_doc.fee_delete(id,quarterly);
                
            }
        }
    }
    if (flag_bool)
    {
        cout << "删除成功！" << endl;
        system("pause");
    }
}
void fee_meun_find_all() {
    bool flag_bool;
    fee fee_object;
    doc fee_doc;
    flag_bool = fee_doc.fee_real_all(fee_object);
}
void fee_meun_find_one(){
    int flag = 1;
    int id;
    bool flag_while = true;
    owner owner_object;
    fee fee_object;
    doc fee_doc;

    while (flag_while)
    {
        cout << "================================================================================" << endl;
        cout << "请输入要查询业主的id(楼号+房号):";
        cin >> id;
        owner_object = fee_doc.owner_find_by_id(id);
        
        if (owner_object.owner_get_id() == 0 && fee_doc.fee_find_by_id(id))
        {
            cout << "================================================================================" << endl;
            cout << "没有查到对应业主信息！请重试！" << endl;
            system("pause");
        }
        else
        {
            cout << "================================================================================" << endl;
            cout << "业主"<<owner_object.owner_get_name()<<"信息为:" << endl;
            fee_doc.fee_find_one(id);
        }

        flag_while = false;
    }
}
void fee_meun_statistics(){

    char choice_char;
    bool flag_bool = true;
    doc doc_object;
    int choice, flag = 1;
    while (flag)
    {
        system("cls");
cout << "================================================================================" << endl;
cout << "=                                  统计                                        =" << endl;
cout << "================================================================================" << endl;
cout << "=                                                                              =" << endl;
cout << "=                               1.查看文件                                      =" << endl;
cout << "=                               2.删除文件                                      =" << endl;
cout << "=                               3.重新统计                                      =" << endl;
cout << "=                               4.返回                                         =" << endl;
cout << "=                                                                              =" << endl;
cout << "================================================================================" << endl;
        cout << "请选择对应功能: ";
        cin >> choice;
        while (choice == 0 || choice > 4) {
            cout << "输入数字不正确，请重新输入1-4: ";
            cin >> choice;
        }
        switch (choice) {
        case 1:
            system("cls");
            cout << "================================================================================" << endl;
            cout << "请选择查看的文件(1.楼号排序 2.季度排序 ): ";
            cin >> choice;
            while (choice == 0 || choice > 2) {
                cout << "输入数字不正确，请重新输入1或2: ";
                cin >> choice;
            }
            flag_bool = doc_object.fee_statistics_read(choice);
            break;
        case 2:
            system("cls");
            cout << "================================================================================" << endl;
            cout << "是否清空之前文件内容？(y/n): ";
            cin >> choice_char;
            if (choice_char == 'y' || choice_char == 'Y')
            {
                cout << "选择清空的排序文件(1.楼号 2.季度 3.全部): ";
                cin >> choice;
                while (choice == 0 || choice > 3) {
                    cout << "输入数字不正确，请重新输入1或3: ";
                    cin >> choice;
                }
                flag_bool = doc_object.fee_clean_unpaid(choice);
            }
            break;
        case 3:
            system("cls");
            cout << "================================================================================" << endl;
            cout << "请选择排序方式(1.楼号 2.季度 ): ";
            cin >> choice;
            while (choice == 0 || choice > 2) {
                cout << "输入数字不正确，请重新输入1或2: ";
                cin >> choice;
            }
            if (choice == 1)
            {
                flag_bool = doc_object.fee_statistics_by_floor();
            }
            else
            {
                flag_bool = doc_object.fee_statistics_by_quarterly();
            }
            break;
        default:
            flag = 0;
            system("cls");
            break;
        }
    }

}

void repair_meun_input(){
    int id_repair;
    bool flag_bool = true;
    doc doc_object;
    repair repair_object;
    owner owner_object;
    while (flag_bool) {
        cout << "================================================================================" << endl;
        cout << "请输入维修业主的id(楼号+房号): ";
        cin >> id_repair;
        if (id_repair == 0) break;
        owner_object = doc_object.owner_find_by_id(id_repair);
        if (owner_object.owner_get_id() == 0) {
            cout << "================================================================================" << endl;
            cout << "未找到相应用户!请重新输入!" << endl;
            flag_bool = true;
        }
        else {
            cout << "================================================================================" << endl;
            cout << "找到了！\n用户信息为: " << endl;
            owner_object.owner_print();
            system("pause");
            repair_object.repair_set(id_repair);
            doc_object.repair_write(repair_object);
            flag_bool = false;
            system("pause");
        }
    }
}
void repair_meun_find_all(){
    bool flag_bool;
    repair repair_object;
    doc repair_doc;
    flag_bool = repair_doc.repair_read_all(repair_object);

}
void repair_meun_delete(){
    int id = 0;
    char choice;
    doc doc_object;
    owner owner_object;
    repair repair_object;
    bool flag_bool = true;
    int year, month, day, hour, minute;
    while (flag_bool)
    {
        cout << "================================================================================" << endl;
        cout << "请输入想要删除的业主的id(楼号+房号): ";
        cin >> id;
        cout << "请输入维修登记时间: " << endl;
        cout << "年: ";
        cin >> year;
        cout << "月: ";
        cin >> month;
        cout << "日: ";
        cin >> day;
        cout << "时: ";
        cin >> hour;
        cout << "分: ";
        cin >> minute;
        if (id == 0) break;
        repair_object = doc_object.repair_find_by_id(id);
        if (repair_object.repair_get_id() == 0)
        {
            cout << "================================================================================" << endl;
            cout << "没有找到对应业主，请重试！(id=0时退出)" << endl;;
            flag_bool = true;
        }
        else {
            cout << "找到了! " << endl;
            repair_object.repair_print();
            owner_object = doc_object.owner_find_by_id(id);

            cout << "================================================================================" << endl;
            cout << "确认删除" << owner_object.owner_get_name() << "的信息？(y/n): ";
            cin >> choice;
            if (choice == 'y' || choice == 'Y')
            {
                flag_bool = doc_object.repair_delete(id,year,month,day,hour,minute);
                if (flag_bool){
                    cout << "================================================================================" << endl;
                    cout<<"删除成功!"<<endl;
                    flag_bool = false;
                    system("pause");
                }
                else{
                    cout << "================================================================================" << endl;
                    cout << "删除失败，请重试!可能是时间错了。" << endl;
                    system("pause");
                }
                
            }
            
        }
    }
}
void repair_meun_find_one()
{
    int id;
    doc doc_object;
    bool flag_bool = false;
    cout << "================================================================================" << endl;
    cout << "请输入想要查找的业主的id(楼号+房号): ";
    cin >> id;
    flag_bool = doc_object.repair_find(id);

}

void announcement_meun_input() {
    bool flag_bool = true;
    int flag_int;
    doc doc_object;
    announcement announcement_object;
    owner owner_object;
    while (flag_bool) {
        announcement_object.announcement_set();
        flag_bool = doc_object.announcement_write(announcement_object);

        //这里可以加一个询问是否继续
        cout << "是否继续？(1.继续 2.退出): ";
        cin >> flag_int;
        cout << "================================================================================" << endl;
        if (flag_int == 2) flag_bool = false;;
    }
}
void announcement_meun_find_all() {
    bool flag_bool;
    announcement announcement_object;
    doc announcement_doc;
    flag_bool = announcement_doc.announcement_read_all(announcement_object);
}
void announcement_meun_delete() {
    int id = 0;
    char choice;
    doc doc_object;
    bool flag_bool = true;
    int year, month, day, hour, minute;
    while (flag_bool)
    {
        cout << "================================================================================" << endl;
        cout << "请输入公告登记时间: " << endl;
        cout << "年: ";
        cin >> year;
        cout << "月: ";
        cin >> month;
        cout << "日: ";
        cin >> day;
        cout << "时: ";
        cin >> hour;
        cout << "分: ";
        cin >> minute;
        if (year == 0)break;
    
        cout << "================================================================================" << endl;
        cout << "确认删除？(y/n): ";
        cin >> choice;
        if (choice == 'y' || choice == 'Y')
        {
            flag_bool = doc_object.announcement_delete(year, month, day, hour, minute);
            if (flag_bool) {
                cout << "================================================================================" << endl;
                cout << "删除成功!" << endl;
                flag_bool = false;
                system("pause");
            }
            else {
                cout << "================================================================================" << endl;
                cout << "删除失败，请重试!" << endl;
                system("pause");
            }

        }
        else break;
    }

}
```

## admin.h

```cpp
#pragma once
#include <iostream>
#include<string.h>
using namespace std;
class admin {
private:
	char user_name[100];
	char password[100];
public:
	void admin_set();//只是用于第一次设置
	void admin_print();
	char* admin_get_name();
	char* admin_get_password();
	void admin_set_password(char *pw);
	void admin_set_username(char* user);
};
```

## admin.cpp

```cpp
#pragma once
#include "admin.h"

void admin::admin_set()
{
	char user_name[100];
	char password[100];
	cout << "请输入新增管理员的用户名: ";
	cin >> user_name;
	cout << "设置一个新的密码: ";
	cin >> password;

	strcpy(this->user_name, user_name);
	strcpy(this->password, password);
	
	cout << "设置成功!用户名和密码为: " << endl;
	admin_print();

}

void admin::admin_print()
{
	cout << "user name: "<<user_name << endl;
	cout << "password: " << password << endl;
}

char* admin::admin_get_name(){
	return this->user_name;
}

char* admin::admin_get_password(){
	return this->password;
}

void admin::admin_set_password(char *pw){
	strcpy(this->password, pw);
}

void admin::admin_set_username(char* user)
{
	strcpy(this->user_name,user);
}

```



## owner.h

```cpp
#pragma once
#include <iostream>
#include <string.h>
#include <fstream>
using namespace std;
class sex_error {};

class owner {
private:
	char name[100];
	char sex[100];
	char phone_number[100];
	int floor;//楼号
	int room_number;//房号
	double area = 0;//面积，由于后面涉及计算，这里采用浮点数
	int id;
	/*由于业主类，费用类，维修类都需要建立一个文件，为了统一，设置了一个id的变量
		id需要唯一性，于是采用了楼号+房号作为id的数字，也方便后面的操作*/

	//为后面方便计算，规定,楼号为1 - 99之间两位数字, 房号为1 - 9999之间4位数字
public:
	void owner_set();
	void owner_print();//仅仅测试用
	int owner_get_id();
	int owner_get_floor();
	char* owner_get_name();
	int owner_create_id(int x,int y);//楼号和房号相连
	void owner_set_id(int id);
	double owner_get_area();
	void owner_set_name();
	void owner_set_sex();
	void owner_set_phone_number();
	void owner_set_area();
};


```

## owner.cpp

```cpp
#pragma once
#include "owner.h"

void owner::owner_set() {
	char name[100];
	char phone_number[100];
	int floor;
	int room_number;
	double area = 0;
	int id;
	int sex_int;
	cout << "请输入业主的姓名: ";
	cin >> name; strcpy(this->name, name);
	cout << "请选择业主性别对应数字(1.男/2.女): ";
	while (true) {
		cin >> sex_int;
		try {
			if (sex_int == 1) {
				strcpy(this->sex, "男");
				break;
			}
			else {
				if (sex_int == 2) {
					strcpy(this->sex, "女");
					break;
				}
				else throw sex_error();
			}
		}
		catch (sex_error) {
			cout << "请输入数字1或2！" << endl;
		}
	}
	cout << "请输入业主手机号: ";
	cin >> phone_number; strcpy(this->phone_number, phone_number);
	cout << "请输入业主楼号: ";
	cin >> floor; this->floor = floor;
	cout << "请输入业主房号: ";
	cin >> room_number; this->room_number = room_number;
	cout << "请输入业主住宅面积(平方): ";
	cin >> area; this->area = area;
	id = owner_create_id(floor, room_number);
	this->id = id;
	this->owner_print();
}
int owner::owner_create_id(int x, int y) {
	int ans;
	x *= 10;
	for (ans = y / 10; ans != 0; ans /= 10) {
		x *= 10;
	}
	return x + y;
}
int owner::owner_get_id() { 
	return this->id; 
}
void owner::owner_set_id(int id) {
	this->id = id;
}
void owner::owner_print() {
	cout << "================================================================================" << endl;
	cout << "姓名: " << name << endl;
	cout << "性别: " << sex << endl;
	cout << "电话: " << phone_number << endl;
	cout << "楼号#房号: " << floor << "#" << room_number << endl;
	cout << "面积: " << area << endl;
	cout << "ID: " << id << endl;
	cout << "================================================================================" << endl;
}
char* owner::owner_get_name() {
	return this->name;
}
void owner::owner_set_name() {
	char name[100];
	cout << "请输入业主的姓名: ";
	cin >> name; strcpy(this->name, name);
}
void owner::owner_set_sex() {
	int sex_int;
	cout << "================================================================================" << endl;
	cout << "请选择业主性别对应数字(1.男/2.女): ";
	while (true) {
		cin >> sex_int;
		try {
			if (sex_int == 1) {
				strcpy(this->sex, "男");
				break;
			}
			else {
				if (sex_int == 2) {
					strcpy(this->sex, "女");
					break;
				}
				else throw sex_error();
			}
		}
		catch (sex_error) {
			cout << "请输入数字1或2！" << endl;
		}
	}
}
void owner::owner_set_phone_number() {
	char phone_number[100];
	cout << "请输入业主手机号: ";
	cin >> phone_number; strcpy(this->phone_number, phone_number);
}
void owner::owner_set_area() {
	double area = 0;
	cout << "请输修改后的入业主住宅面积(平方): ";
	cin >> area; this->area = area;
}
double owner::owner_get_area() {
	return this->area;
}
int owner::owner_get_floor() {
	return this->floor;
}
```

## fee.h

```cpp
#pragma once
#include<iostream>
using namespace std;
class fee {
private:
	int id;
	int quarterly;//季度
	double cube;//水的用量，立方
	bool paid;//判断是否缴费
	double property_costs_k = 0.75;//物业费k=0.75
	double elevator_fee_k = 0.3;//电梯费k=0.3
	double heating_costs_k = 20;//暖气费k=20
	double water_fee_k = 0.28;//水费k=0.28
	//以上k为2020国家收费标准2等水平
	double property_costs;//物业费=k*面积
	double elevator_fee;//电梯费=k*面积
	double heating_costs;//暖气费=k*面积
	double water_fee;//水费=k*立方
	double all;//收费总和

public:
	void fee_set(double area, int id);
	void fee_print();
	void fee_set_id(int id);
	void fee_set_property_costs();
	void fee_set_elevator_fee();
	void fee_set_heating_costs();
	void fee_set_water_fee();
	void fee_set_quarterly();
	void fee_set_all();
	void fee_set_paid();
	bool fee_get_paid();
	int fee_get_id();
	int fee_get_quarterly();
};
#pragma once
#include<iostream>
using namespace std;
class fee {
private:
	int id;
	int quarterly;//季度
	double cube;//水的用量，立方
	bool paid;//判断是否缴费
	double property_costs_k = 0.75;//物业费k=0.75
	double elevator_fee_k = 0.3;//电梯费k=0.3
	double heating_costs_k = 20;//暖气费k=20
	double water_fee_k = 0.28;//水费k=0.28
	//以上k为2020国家收费标准2等水平,baidu
	double property_costs;//物业费=k*面积
	double elevator_fee;//电梯费=k*面积
	double heating_costs;//暖气费=k*面积
	double water_fee;//水费=k*立方
	double all;//收费总和

public:
	void fee_set(double area, int id);
	void fee_print();
	void fee_set_id(int id);
	void fee_set_property_costs();
	void fee_set_elevator_fee();
	void fee_set_heating_costs();
	void fee_set_water_fee();
	void fee_set_quarterly();
	void fee_set_all();
	void fee_set_paid();
	bool fee_get_paid();
	int fee_get_id();
	int fee_get_quarterly();
};
```

## fee.cpp

```cpp
#pragma once
#include"fee.h"
#include<iostream>
using namespace std;

void fee::fee_set(double area,int id) {
	int quarterly;//季度
	bool paid;//是否缴费
	double cube;//水的用量，立方
	char choice;

	cout << "================================================================================" << endl;
	cout << "是否更改各费用收费系数？(y/n): ";
	cin >> choice;
	if (choice == 'y' || choice == 'Y')
	{
		cout << "请输入物业费收费系数(元/m2): ";
		cin >> property_costs_k;
		cout << "请输入电梯费收费系数(元/m2): ";
		cin >> elevator_fee_k;
		cout << "请输入暖气费收费系数(元/m2): ";
		cin >> heating_costs_k;
		cout << "请输入水费收费系数(元/m3): ";
		cin >> water_fee_k;

		cout << "现在的收费标准是:" << endl;
		cout << "物业费: " << property_costs_k << "元/m2" << endl;
		cout << "电梯费: " << elevator_fee_k << "元/m2" << endl;
		cout << "暖气费: " << heating_costs_k << "元/m2" << endl;
		cout << "水费: " << water_fee_k << "元/m3" << endl;
	}

	this->property_costs_k = property_costs_k;
	this->elevator_fee_k = elevator_fee_k;
	this->heating_costs_k = heating_costs_k;
	this->water_fee_k = water_fee_k;
	while (true)
	{
		cout << "请输入季度: ";
		cin >> quarterly;
		if (quarterly < 5)
		{
			break;
		}
		else
		{
			cout<<"请输入季度1-4！"<<endl;
		}
	}

	

	cout << "请输入业主本季度用水(m3): ";
	cin >> cube;
	cout << "业主是否缴费(y/n): ";
	cin >> choice;
	if (choice == 'y' || choice == 'Y')
		paid = true;
	else paid = false;
	double all = 0;//收费总和
	double property_costs= this->property_costs_k * area;//物业费=k*面积
	double elevator_fee = this->elevator_fee_k * area;//电梯费=k*面积
	double heating_costs = this->heating_costs_k * area;//暖气费=k*面积
	double water_fee = this->water_fee_k * cube;//水费=k*立方

	all = property_costs + elevator_fee + heating_costs  + water_fee;

	this->quarterly = quarterly;
	this->property_costs = property_costs;
	this->elevator_fee = elevator_fee;
	this->heating_costs = heating_costs;
	this->water_fee = water_fee;
	this->cube = cube;
	this->paid = paid;
	this->all = all;
	this->id = id;

	fee_print();
}
void fee::fee_print() {
	cout << "================================================================================" << endl;
	
	cout << "业主第" << quarterly << "季度的收费信息:" << endl;
	cout << "ID: " << id << endl;
	cout << "是否缴费: ";
	if (paid)
		cout << "已缴费" << endl;
	else cout << "未缴费" << endl;

	cout << "本季度物业费: " << property_costs << endl;;
	cout << "本季度电梯费: " << elevator_fee << endl;
	cout << "本季度暖气费: " << heating_costs << endl;
	cout << "本季度水费: " << water_fee << endl;
	cout << "总计: " << all << endl;
	cout << "================================================================================" << endl;
}
void fee::fee_set_id(int id) {
	this->id = id;
}

void fee::fee_set_quarterly() {
	int quarterly;
	cout << "================================================================================" << endl;
	cout << "请输更改后的季度: ";
	cin >> quarterly;
	this->quarterly = quarterly;
}
void fee::fee_set_property_costs() {
	double property_costs;
	cout << "================================================================================" << endl;
	cout << "请输入更改后的物业费: ";
	cin >> property_costs;
	this->property_costs = property_costs;
}
void fee::fee_set_elevator_fee() {
	double elevator_fee;
	cout << "================================================================================" << endl;
	cout << "请输入更改后的电梯费: ";
	cin >> elevator_fee;
	this->elevator_fee = elevator_fee;
}
void fee::fee_set_heating_costs(){
	double heating_costs;
	cout << "================================================================================" << endl;
	cout << "请输入更改后的暖气费: ";
	cin >> heating_costs;
	this->heating_costs = heating_costs;
}
void fee::fee_set_water_fee() {
	double water_fee;
	cout << "================================================================================" << endl;
	cout << "请输入更改后的水费: ";
	cin >> water_fee;
	this->water_fee = water_fee;
}
void fee::fee_set_paid() {
	int choice;
	cout << "================================================================================" << endl;
	cout << "将缴费信息修改为(1.已缴费 2.未缴费): ";
	cin >> choice;
	while (choice == 0 || choice > 2) {
		cout << "输入数字不正确，请重新输入1-2: ";
		cin >> choice;
	}
	if (choice == 1)this->paid = true;
	else this->paid = false;
}
void fee::fee_set_all() {
	this->all = this->property_costs + this->elevator_fee + 
		this->heating_costs  + this->water_fee;
}
int fee::fee_get_id() {
	return this->id;
}
int fee::fee_get_quarterly() {
	return this->quarterly;
}
bool fee::fee_get_paid() {
	return this->paid;
}
```

## repair.h

```cpp
#pragma once
#include<windows.h>
#include<iostream>
#include<string.h>
using namespace std;

class repair {
private:
	int id;
	int Year, Month, Day, Hour, Minute, Second, DayOfWeek;//调用时间
	/*
	SYSTEMTIME sys;
	GetLocalTime(&sys);
	sys.wYear, sys.wMonth, sys.wDay, sys.wHour, sys.wMinute, sys.wSecond, sys.wDayOfWeek 返回一个整型数字
	*/
	char reason[100];//维修原因
	char situation[100];//维修情况
public:
	void repair_set(int id_p);
	void repair_print();
	int repair_get_id();
	void repair_set_id(int id_p);
	int repair_get_year();
	int repair_get_month();
	int repair_get_day();
	int repair_get_hour();
	int repair_get_minute();
	int repair_get_second();
	int repair_get_week();
};
```

## repair.cpp

```cpp
#pragma once
#include "repair.h"
using namespace std;

void repair::repair_set(int id_p) {
	bool flag_bool = false;
	char reason[100];//维修原因
	char situation[100];//维修情况
	
	SYSTEMTIME sys;
	GetLocalTime(&sys);
	/*int wYear, wMonth, wDay, wHour, wMinute, wSecond, wDayOfWeek;*/
	Year = sys.wYear; Month = sys.wMonth; Day = sys.wDay;
	Hour = sys.wHour; Minute = sys.wMinute; Second = sys.wSecond;
	DayOfWeek = sys.wDayOfWeek;
	//读取系统时间


	cout << "请输入维修原因: ";
	cin >> reason;

	cout << "请输入维修情况: ";
	cin >> situation;

	this->id = id_p;
	strcpy(this->reason, reason);
	strcpy(this->situation, situation);

	repair_print();
}
void repair::repair_print() {
	bool flag_bool = false;
	/*owner owner_project;
	doc doc_repair;

	owner_project = doc_repair.owner_find_by_id(id);
	cout << "姓名: " << owner_project.owner_get_name() << endl;*/
	/*int wYear, wMonth, wDay, wHour, wMinute, wSecond, wDayOfWeek;*/
	cout << "================================================================================" << endl;
	cout << "ID: " << id << endl;
	cout << "维修登记时间: " << Year << "年" << Month << "月" << Day << "日  "
		<< Hour << ":";
	if (Minute < 10){
		cout << "0" << Minute;//小于10时加一
	}
	else{
		cout << Minute;
	}
	cout << "  星期";
	if (DayOfWeek == 1) {cout << "一" << endl;}
	if (DayOfWeek == 2) {cout << "二" << endl;}
	if (DayOfWeek == 3) {cout << "三" << endl;}
	if (DayOfWeek == 4) {cout << "四" << endl;}
	if (DayOfWeek == 5) {cout << "五" << endl;}
	if (DayOfWeek == 6) {cout << "六" << endl;}
	if (DayOfWeek == 7) {cout << "日" << endl;}
	cout << "维修原因: " << reason << endl;
	cout << "维修状况: " << reason << endl;
	cout << "================================================================================" << endl;
	
}
int repair::repair_get_id()
{
	return this->id;
}
void repair::repair_set_id(int id_p) {
	this->id = id_p;
}
int repair::repair_get_year()
{
	return this->Year;
}
int repair::repair_get_month()
{
	return this->Month;
}
int repair::repair_get_day()
{
	return this->Day;
}
int repair::repair_get_hour()
{
	return this->Hour;
}
int repair::repair_get_minute()
{
	return this->Minute;
}
int repair::repair_get_second()
{
	return this->Minute;
}
int repair::repair_get_week()
{
	return this->DayOfWeek;
}

```

## announcement.h

```cpp
#pragma once
#include <fstream>
#include <iostream>
#include <string>
#include "owner.h"
#include "fee.h"
#include "repair.h"
#include "admin.h"
#include "announcement.h"
using namespace std;

class doc {
private:
	char owner_file_name[100] = "owner_infor.dat";
	char fee_file_name[100] = "fee_infor.dat";
	char unpaid_by_floor_name[100] = "unpaid_by_floor.dat";
	char unpaid_by_quarterly_name[100] = "unpaid_by_quarterly.dat";
	char repair_file_name[100] = "repair_infor.dat";
	char admin_file_name[100] = "admin_infor.dat";
	char announcement_file_name[100] = "announcement_infor.dat";
public:
	bool owner_write(owner &owner_p);
	bool owner_read_all(owner &owner_p);
	bool owner_rewrite(owner &owner_p);
	bool owner_delete(int id);
	owner owner_find_by_id(int id);

	/*bool fee_add();*/
	bool fee_write(fee &fee_p);
	bool fee_real_all(fee &fee_p);
	bool fee_rewrite(fee& fee_p);
	bool fee_delete(int id, int quarterly);
	fee fee_find_by_id_quarterly(int id,int quarterly);
	bool fee_find_by_id(int id);
	bool fee_find_one(int id);
	bool fee_statistics_read(int flag_int);
	bool fee_statistics_by_floor();//注意统计的是未缴费的
	bool fee_statistics_by_quarterly();
	bool fee_unpaid_write(fee& fee_pp,int flag);//未缴费写入flag = 0时按照楼号， flag = 1时按照季度
	bool fee_clean_unpaid(int flag);//清空之前的文件


	bool repair_write(class repair &repair_p);//这几处加class是因为编译器报错显示重定义，查询资料得出此修改方法
	bool repair_read_all(class repair& repair_p);
	bool repair_delete(int id_p,int year_p,int month_p,int day_p,int hour_p,int min_p);
	class repair repair_find_by_id(int id_p);//这个函数找到一个时就会停止查找
	bool repair_find(int id_p);//这个函数找到所有函数并显示

	bool admin_write(admin& admin_p);
	char* admin_find(char* username_p);//输入用户名，返回一个密码
	bool admin_rewrite(admin& admin_p);

	bool announcement_write(announcement& announcement_p);
	bool announcement_read_all(announcement& announcement_p);
	bool announcement_delete(int year_p, int month_p, int day_p, int hour_p, int min_p);


};
```

## announcement.cpp

```cpp
#pragma once
#include "announcement.h"
void announcement::announcement_set(){
	char title[100];
	char content[100];
	SYSTEMTIME sys;
	GetLocalTime(&sys);
	/*int wYear, wMonth, wDay, wHour, wMinute, wSecond, wDayOfWeek;*/
	Year = sys.wYear; Month = sys.wMonth; Day = sys.wDay;
	Hour = sys.wHour; Minute = sys.wMinute; Second = sys.wSecond;
	DayOfWeek = sys.wDayOfWeek;
	//读取系统时间
	cout << "================================================================================" << endl;
	cout << "请输入公告标题:";
	cin >> title;
	cout << "请输入公告内容: ";
	cin >> content;

	strcpy(this->title, title);
	strcpy(this->content, content);

	announcement_print();
}
void announcement::announcement_print()
{
	cout << "================================================================================" << endl;
	cout <<"标题: "<<title << endl;
	cout << "内容: "<<content << endl;
	cout << "时间: " << Year << "年" << Month << "月" << Day << "日  "
		<< Hour << ":";
	if (Minute < 10) {
		cout << "0" << Minute;//小于10时加一
	}
	else
	{
		cout << Minute;
	}
	cout << "  星期";
	if (DayOfWeek == 1) { cout << "一" << endl; }
	if (DayOfWeek == 2) { cout << "二" << endl; }
	if (DayOfWeek == 3) { cout << "三" << endl; }
	if (DayOfWeek == 4) { cout << "四" << endl; }
	if (DayOfWeek == 5) { cout << "五" << endl; }
	if (DayOfWeek == 6) { cout << "六" << endl; }
	if (DayOfWeek == 7) { cout << "日" << endl; }
	cout << "================================================================================" << endl;
	system("pause");
}

int announcement::announcement_get_year()
{
	return this->Year;
}
int announcement::announcement_get_month()
{
	return this->Month;
}
int announcement::announcement_get_day()
{
	return this->Day;
}
int announcement::announcement_get_hour()
{
	return this->Hour;
}
int announcement::announcement_get_minute()
{
	return this->Minute;
}
int announcement::announcement_get_second()
{
	return this->Minute;
}
int announcement::announcement_get_week()
{
	return this->DayOfWeek;
}
```

## doc.h

```cpp
#pragma once
#include <fstream>
#include <iostream>
#include <string>
#include "owner.h"
#include "fee.h"
#include "repair.h"
#include "admin.h"
#include "announcement.h"
using namespace std;

class doc {
private:
	char owner_file_name[100] = "owner_infor.dat";
	char fee_file_name[100] = "fee_infor.dat";
	char unpaid_by_floor_name[100] = "unpaid_by_floor.dat";
	char unpaid_by_quarterly_name[100] = "unpaid_by_quarterly.dat";
	char repair_file_name[100] = "repair_infor.dat";
	char admin_file_name[100] = "admin_infor.dat";
	char announcement_file_name[100] = "announcement_infor.dat";
public:
	bool owner_write(owner &owner_p);
	bool owner_read_all(owner &owner_p);
	bool owner_rewrite(owner &owner_p);
	bool owner_delete(int id);
	owner owner_find_by_id(int id);

	/*bool fee_add();*/
	bool fee_write(fee &fee_p);
	bool fee_real_all(fee &fee_p);
	bool fee_rewrite(fee& fee_p);
	bool fee_delete(int id, int quarterly);
	fee fee_find_by_id_quarterly(int id,int quarterly);
	bool fee_find_by_id(int id);
	bool fee_find_one(int id);
	bool fee_statistics_read(int flag_int);
	bool fee_statistics_by_floor();//注意统计的是未缴费的
	bool fee_statistics_by_quarterly();
	bool fee_unpaid_write(fee& fee_pp,int flag);//未缴费写入flag = 0时按照楼号， flag = 1时按照季度
	bool fee_clean_unpaid(int flag);//清空之前的文件


	bool repair_write(class repair &repair_p);//这几处加class是因为编译器报错显示重定义，查询资料得出此修改方法
	bool repair_read_all(class repair& repair_p);
	bool repair_delete(int id_p,int year_p,int month_p,int day_p,int hour_p,int min_p);
	class repair repair_find_by_id(int id_p);//这个函数找到一个时就会停止查找
	bool repair_find(int id_p);//这个函数找到所有函数并显示

	bool admin_write(admin& admin_p);
	char* admin_find(char* username_p);//输入用户名，返回一个密码
	bool admin_rewrite(admin& admin_p);

	bool announcement_write(announcement& announcement_p);
	bool announcement_read_all(announcement& announcement_p);
	bool announcement_delete(int year_p, int month_p, int day_p, int hour_p, int min_p);


};
```

## doc.cpp

```cpp
#pragma once
#include "doc.h"

bool doc::owner_write(owner& owner_p) {
	fstream datafile;
	//打开文件
	datafile.open(owner_file_name, ios::in | ios::out);
	//把文件指针移动到末尾
	datafile.seekp(0, ios::end);
	//写入内容
	datafile.write((char*)&owner_p, sizeof(class owner));
	//关闭
	datafile.close();
	return true;
}
bool doc::owner_read_all(owner& owner_p) {
	fstream datafile;
	datafile.open(owner_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);//记录末尾位置
	long poEnd = datafile.tellg();//末尾位置赋值
	datafile.seekg(0, ios::beg);//跳转到开始
	if (datafile.tellg() == poEnd)
	{
		cout << "================================================================================" << endl;
		cout << "=                                文件里没有信息！                              ="<<endl;
		cout << "================================================================================" << endl;
		
	}
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&owner_p, sizeof(class owner));
		owner_p.owner_print();
	}
	datafile.close();
	system("pause");
	return true;
}
bool doc::owner_rewrite(owner& owner_p) {
	int id;
	id = owner_p.owner_get_id();
	owner owner_pw[40];
	int i = 0, j = 0;
	fstream datafile;
	datafile.open(owner_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);
	long poEnd = datafile.tellg();
	datafile.seekg(0, ios::beg);
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&owner_pw[i], sizeof(owner));
		i++;
	}
	datafile.close();//将所有数据读取

	datafile.open(owner_file_name, ios::in | ios::out | ios::trunc);//打开文件并清除原来的内容
	datafile.seekg(0, ios::beg);
	while (j != i) {
		if (owner_pw[j].owner_get_id() != id) {
			datafile.write((char*)&owner_pw[j], sizeof(class owner));//如果不等于就写人	
		}
		else datafile.write((char*)&owner_p, sizeof(class owner));
		j++;
	}
	datafile.close();//将所有数据读取
	return true;

} 
bool doc::owner_delete(int id) {
	owner owner_p[40];
	int i = 0,j =0;
	fstream datafile;
	datafile.open(owner_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);
	long poEnd = datafile.tellg();
	datafile.seekg(0, ios::beg);
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&owner_p[i], sizeof(owner));
		i++;
	}
	datafile.close();//将所有数据读取

	datafile.open(owner_file_name, ios::in | ios::out |ios::trunc);//打开文件并清除原来的内容
	datafile.seekg(0, ios::beg);
	while (j != i){
		if (owner_p[j].owner_get_id() != id) {
			datafile.write((char*)&owner_p[j], sizeof(class owner));//如果不等于就写人	
		}
		j++;
	}
	datafile.close();//将所有数据读取
	return true;

}
owner doc::owner_find_by_id(int id) {
	owner owner_p;
	int flag = 0;//用户不存在
	fstream iof;
	iof.open(owner_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);
	while (iof.tellg() != poEnd) {
		iof.read((char*)&owner_p, sizeof(owner));
		if (owner_p.owner_get_id() == id) {//找到了,存在
			flag = 1;//存在
			break;
		}
	}
	//即便是没找到
	if (flag == 0) {
		owner_p.owner_set_id(0);
	}
	iof.close();
	return owner_p;
}

bool doc::fee_write(fee& fee_p){
	fstream datafile;
	datafile.open(fee_file_name, ios::in | ios::out);
	datafile.seekp(0, ios::end);
	datafile.write((char*)&fee_p, sizeof(class fee));
	datafile.close();
	return true;
}
bool doc::fee_real_all(fee& fee_p) {
	int id;
	fstream datafile;
	datafile.open(fee_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);//记录末尾位置
	long poEnd = datafile.tellg();//末尾位置赋值
	datafile.seekg(0, ios::beg);//跳转到开始
	if (datafile.tellg() == poEnd)
	{
		cout << "================================================================================" << endl;
		cout << "文件里没有信息！" << endl;
	}

	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&fee_p, sizeof(class fee));
		id = fee_p.fee_get_id();
		cout << "================================================================================" << endl;
		cout << owner_find_by_id(id).owner_get_name() << "的费用信息:" << endl;
		fee_p.fee_print();
	}
	datafile.close();
	system("pause");
	return true;
}
bool doc::fee_rewrite(fee& fee_p) {
	bool tag = false;
	fee old;
	fstream datafile;
	datafile.open(fee_file_name, ios::in | ios::out);
	datafile.seekp(0, ios::end);
	long poEnd = datafile.tellp();
	datafile.seekp(0, ios::beg);
	while (datafile.tellp() != poEnd) {
		datafile.read((char*)&old, sizeof(class fee));
		if (old.fee_get_id() == fee_p.fee_get_id() && old.fee_get_quarterly()== fee_p.fee_get_quarterly()) {
			datafile.seekp(-sizeof(class fee), ios::cur);
			datafile.write((char*)&fee_p, sizeof(fee));
			tag = true;
			break;
		}
	}
	datafile.close();
	return tag;
}
bool doc::fee_delete(int id_p, int quarterly_p){
	fee fee_p[40];
	int i = 0, j = 0;
	fstream datafile;
	datafile.open(fee_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);
	long poEnd = datafile.tellg();
	datafile.seekg(0, ios::beg);
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&fee_p[i], sizeof(class fee));
		i++;
	}
	datafile.close();

	datafile.open(fee_file_name, ios::in | ios::out | ios::trunc);//打开文件并清除原来的内容
	datafile.seekg(0, ios::beg);
	while (j != i) {
		if (fee_p[j].fee_get_id() != id_p || fee_p[j].fee_get_quarterly() != quarterly_p) {
			datafile.write((char*)&fee_p[j], sizeof(class fee));//如果不等于就写人	
		}
		j++;
	}
	datafile.close();
	return true;
}
bool doc::fee_find_by_id(int id) {
	fee fee_p;
	bool flag = false;
	fstream iof;
	iof.open(fee_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);
	while (iof.tellg() != poEnd) {
		iof.read((char*)&fee_p, sizeof(fee));
		if (fee_p.fee_get_id() == id) {
			flag = true;
			break;
		}
	}
	iof.close();
	
	return flag;
}
bool doc::fee_find_one(int id) {//多次查找同一id的业主缴费信息
	fee fee_p;
	bool flag = false;
	fstream dataflie;
	dataflie.open(fee_file_name, ios::in | ios::out);
	dataflie.seekg(0, ios::end);
	long poEnd = dataflie.tellg();
	dataflie.seekg(0, ios::beg);

	while (dataflie.tellg() != poEnd) {
		dataflie.read((char*)&fee_p, sizeof(class fee));
		if (fee_p.fee_get_id() == id) {
			fee_p.fee_print();
			system("pause");
			flag = true;
		}
	}
	dataflie.close();
	return flag;
}

bool doc::fee_statistics_read(int flag_int)
{
	int id;
	fee fee_p;
	fstream datafile;
	if (flag_int==1)
	{
		datafile.open(unpaid_by_floor_name, ios::in | ios::out);
	}
	else datafile.open(unpaid_by_quarterly_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);//
	long poEnd = datafile.tellg();//末尾位置赋值记录末尾位置
	datafile.seekg(0, ios::beg);//跳转到开始
	if (datafile.tellg() == poEnd)
	{
		cout << "================================================================================" << endl;
		cout << "文件里没有信息！" << endl;
	}

	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&fee_p, sizeof(class fee));
		id = fee_p.fee_get_id();
		cout << "================================================================================" << endl;
		cout << owner_find_by_id(id).owner_get_name() << "的费用信息:" << endl;
		fee_p.fee_print();
	}
	datafile.close();
	system("pause");
	return true;
}

bool doc::fee_statistics_by_floor() {
	int id, floor, i = 1;
	int write_type = 0;//设置写入类型
	fee fee_p;
	owner owner_object;
	bool flag = false, flag_while = true;
	fstream iof;
	iof.open(fee_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);
	while (flag_while) {
		iof.read((char*)&fee_p, sizeof(fee));//从头开始读取
		id = fee_p.fee_get_id();//取费用类的id
		owner_object = owner_find_by_id(id);//用费用类的id去找到业主类相应的对象
		floor = owner_object.owner_get_floor();//找到业主类的楼号
		if (fee_p.fee_get_paid());
		else{
			if (floor == i) {
				cout << floor << "号楼" << owner_object.owner_get_name() << "的费用信息: " << endl;
				fee_p.fee_print();
				system("pause");
				flag = fee_unpaid_write(fee_p, write_type);
			}
		}
		
		if (iof.tellg() == poEnd)//第一次轮回到结束
		{
			i++;
			iof.seekg(0, ios::beg);//回到开始
		}
		if (i == 99)//规定楼号最大为99
		{
			flag_while = false;//到99结束
			flag = true;
		}
	}
	iof.close();

	return flag;
}
bool doc::fee_statistics_by_quarterly() {
	int id, i = 1, quarterly;
	int write_type = 1;
	fee fee_p;
	owner owner_object;
	bool flag = false, flag_while = true;
	fstream iof;
	iof.open(fee_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);
	while (flag_while) {
		iof.read((char*)&fee_p, sizeof(fee));//从头开始读取
		id = fee_p.fee_get_id();//取费用类的id
		quarterly = fee_p.fee_get_quarterly();//取季度信息
		owner_object = owner_find_by_id(id);//用费用类的id去找到业主类相应的对象
		//floor = owner_object.owner_get_floor();找到业主类的楼号
		if (fee_p.fee_get_paid());//返回是否缴费的信息，未缴费返回false，如果缴费跳过
		else
		{
			if (quarterly == i) {
				cout << "第" << quarterly << "季度" <<
					owner_object.owner_get_name() << "的费用信息: " << endl;
				fee_p.fee_print();
				system("pause");
				flag = fee_unpaid_write(fee_p, write_type);
			}
		}
		if (iof.tellg() == poEnd)//第一次轮回到结束
		{
			i++;
			iof.seekg(0, ios::beg);//回到开始
		}
		if (i == 4)//一年4个季度
		{
			flag_while = false;//到4结束循环
			flag = true;
		}
	}
	iof.close();

	return flag;


}
bool doc::fee_unpaid_write(fee& fee_pp, int flag) {
	fstream datafile;
	if (flag == 0 )
	{
		datafile.open(unpaid_by_floor_name, ios::in | ios::out);
	}
	else
	{
		datafile.open(unpaid_by_quarterly_name, ios::in | ios::out);
	}
	datafile.seekp(0, ios::end);
	datafile.write((char*)&fee_pp, sizeof(class fee));
	datafile.close();
	return true;
}
bool doc::fee_clean_unpaid(int flag)
{
	fstream datafile;
	if (flag == 1){
		datafile.open(unpaid_by_floor_name, ios::in | ios::out | ios::trunc);//打开清空按楼号排序内容
		datafile.close();
	}
	if (flag == 2 ){
		datafile.open(unpaid_by_quarterly_name, ios::in | ios::out | ios::trunc);//打开清空按季度排序内容
		datafile.close();
	}
	if (flag == 3)
	{
		datafile.open(unpaid_by_floor_name, ios::in | ios::out | ios::trunc);
		datafile.close();

		datafile.open(unpaid_by_quarterly_name, ios::in | ios::out | ios::trunc);
		datafile.close();

	}
	return true;
}
fee doc::fee_find_by_id_quarterly(int id, int quarterly_p) {
	fee fee_p;
	int flag = 0;
	fstream iof;
	iof.open(fee_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);
	while (iof.tellg() != poEnd) {
		iof.read((char*)&fee_p, sizeof(class fee));
		if (fee_p.fee_get_id() == id && fee_p.fee_get_quarterly() == quarterly_p) {
			cout<<"从文件找到了"<<endl;
			system("pause");
			flag = 1;
			break;
		}
	}
	if (flag == 0) {
		fee_p.fee_set_id(0);
	}
	iof.close();
	return fee_p;
}

bool doc::repair_write(repair& repair_p) {
	fstream datafile;
	datafile.open(repair_file_name, ios::in | ios::out);
	datafile.seekp(0, ios::end);
	datafile.write((char*)&repair_p, sizeof(repair));
	datafile.close();
	return true;
}
bool doc::repair_read_all(repair& repair_p) {
	fstream datafile;
	datafile.open(repair_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);//记录末尾位置
	long poEnd = datafile.tellg();//末尾位置赋值
	datafile.seekg(0, ios::beg);//跳转到开始
	if (datafile.tellg() == poEnd)
	{
		cout << "================================================================================" << endl;
		cout << "文件里没有信息！" << endl;
	}
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&repair_p, sizeof(class repair));
		repair_p.repair_print();
	}
	datafile.close();
	system("pause");
	return true;
}
bool doc::repair_delete(int id_p, int year_p, int month_p, int day_p, int hour_p, int min_p)
{
	bool flag_bool = false;
	repair repair_p[40];
	int i = 0, j = 0;
	fstream datafile;
	datafile.open(repair_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);
	long poEnd = datafile.tellg();
	datafile.seekg(0, ios::beg);
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&repair_p[i], sizeof(repair));
		i++;
	}
	datafile.close();//将所有数据读取

	datafile.open(repair_file_name, ios::in | ios::out | ios::trunc);//打开文件并清除原来的内容
	datafile.seekg(0, ios::beg);
	while (j != i) {
		if (repair_p[j].repair_get_id() != id_p|| repair_p[j].repair_get_year()!=year_p||
			repair_p[j].repair_get_month()!=month_p||repair_p[j].repair_get_day()!=day_p|| 
			repair_p[j].repair_get_hour() != hour_p || repair_p[j].repair_get_minute()!= min_p) {
			datafile.write((char*)&repair_p[j], sizeof(class repair));//如果不等于就写入
		}
		else flag_bool = true;//只有出现所有条件都符合的时候，说明找到相应数据，不写入且 
		j++;
	}

	datafile.close();//将所有数据读取
	return flag_bool;
}
repair doc::repair_find_by_id(int id_p)
{
	repair repair_p;
	int flag = 0;//用户不存在
	fstream iof;
	iof.open(repair_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);
	while (iof.tellg() != poEnd) {
		iof.read((char*)&repair_p, sizeof(class repair));
		if (repair_p.repair_get_id() == id_p) {//找到了,存在
			flag = 1;//存在
			break;
		}
	}
	//即便是没找到
	if (flag == 0) {
		repair_p.repair_set_id(0);
	}
	iof.close();
	return repair_p;
}
bool doc::repair_find(int id_p) {
	int i = 0;
	repair repair_p;
	bool flag_bool = false;//用户不存在
	fstream iof;
	iof.open(repair_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);
	while (true) {
		if (iof.eof())break;
		iof.read((char*)&repair_p, sizeof(class owner));
		if (repair_p.repair_get_id() == id_p) {//找到了,存在
			flag_bool = true;//存在
			repair_p.repair_print();
			i++;
		}
	}
	if (flag_bool)
	{
		cout << "================================================================================" << endl;
		cout << "共找到以上" << i << "条信息！" << endl;
	}
	else cout << "未找到信息！" << endl;
	system("pause");
	iof.close();
	return flag_bool;
}

bool doc::admin_write(admin& admin_p) {
	fstream datafile;
	datafile.open(admin_file_name, ios::in | ios::out );
	datafile.seekp(0, ios::end);
	datafile.write((char*)&admin_p, sizeof(admin));
	datafile.close();
	return true;

}
char* doc::admin_find(char* username_p) {
	admin admin_p;
	fstream iof;
	char passoword_p[100];
	iof.open(admin_file_name, ios::in | ios::out);
	iof.seekg(0, ios::end);
	long poEnd = iof.tellg();
	iof.seekg(0, ios::beg);

	while (iof.tellg() != poEnd) {
		iof.read((char*)&admin_p, sizeof(admin));
		//strcmp()两个字符串比较，如果相同，则返回0
		if (strcmp(admin_p.admin_get_name(),username_p) == 0 ) {//找到了,存在
			strcpy(passoword_p, admin_p.admin_get_password());
			break;
		}
	}

	iof.close();
	return passoword_p;
}
bool doc::admin_rewrite(admin& admin_p)
{
	fstream datafile;
	datafile.open(admin_file_name, ios::in | ios::out );
	datafile.seekp(0, ios::beg);
	datafile.write((char*)&admin_p, sizeof(admin));
	datafile.close();
	return true;
}

bool doc::announcement_write(announcement& announcement_p){
	fstream datafile;
	datafile.open(announcement_file_name, ios::in | ios::out);
	datafile.seekp(0, ios::end);
	datafile.write((char*)&announcement_p, sizeof(announcement));
	datafile.close();
	return true;
}
bool doc::announcement_read_all(announcement& announcement_p){
	fstream datafile;
	datafile.open(announcement_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);//记录末尾位置
	long poEnd = datafile.tellg();//末尾位置赋值
	datafile.seekg(0, ios::beg);//跳转到开始
	if (datafile.tellg() == poEnd)
	{
		cout << "================================================================================" << endl;
		cout << "文件里没有信息！" << endl;
		system("pause");
		
	}
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&announcement_p, sizeof(class announcement));
		announcement_p.announcement_print();

	}
	datafile.close();
	
	return true;
}
bool doc::announcement_delete(int year_p, int month_p, int day_p, int hour_p, int min_p)
{
	bool flag_bool = true;
	announcement announcement_p[40];
	int i = 0, j = 0;
	fstream datafile;

	datafile.open(announcement_file_name, ios::in | ios::out);
	datafile.seekg(0, ios::end);
	long poEnd = datafile.tellg();
	datafile.seekg(0, ios::beg);
	while (datafile.tellg() != poEnd) {
		datafile.read((char*)&announcement_p[i], sizeof(announcement));
		i++;
	}
	datafile.close();//将所有数据读取

	datafile.open(announcement_file_name, ios::in | ios::out | ios::trunc);//打开文件并清除原来的内容
	datafile.seekg(0, ios::beg);
	while (j != i) {
		if (announcement_p[j].announcement_get_year() != year_p ||
			announcement_p[j].announcement_get_month() != month_p || announcement_p[j].announcement_get_day() != day_p ||
			announcement_p[j].announcement_get_hour() != hour_p || announcement_p[j].announcement_get_minute() != min_p) {
			
			datafile.write((char*)&announcement_p[j], sizeof(class announcement));//如果不等于就写入
			flag_bool = false;
		}
		j++;
	}
	datafile.close();//将所有数据读取
	return flag_bool;
}
```

